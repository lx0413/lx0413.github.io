---
title: "A New High Frequency, News Based, Indicator of Macroeconomic Activity"
subtitle: ""
author: "Xiang LI"
date: "May 29, 2020"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      countIncrementalSlides: false
      #countdown: 120000
    css: [default, metropolis, metropolis-fonts]
---
<style>
  .large { font-size: 200% }
  .small { font-size: 50% }
</style>

<style type="text/css">
.remark-slide-content {
    font-size: 21px;
    padding: 1em 1em 1em 1em;
}

.remark-slide-content h1 {
  font-size: 26px;
}

.remark-slide-content h2 {
  font-size: 25px;
}

.remark-slide-content h3 {
  font-size: 24px;
}

h1 {
  font-weight: normal;
  margin-top: -80px;
  margin-left: -00px;
  color: #FAFAFA;
}

</style>


```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
library(knitr)
library(tidyverse)
library(plotly)
library(kableExtra)
library(ggplot2)
library(lubridate)
library(dplyr)
library(gganimate)
library(readxl)
library(viridis)
library(viridisLite)
library(transformr)
library(magick)
```




# A New High Frequency, News Based, Indicator of Macroeconomic Activity
## Introduction

???

- Kelly, Manela, & Moreira (2019) model the inclusion and repetition of words of some attributes at a monthly frequency in the Wall Street Journal front page news articles. The authors find out that the text from January 1990 to December 2010 documents contains additional information that is useful for forecasting monthly macroeconomic indicators beyond that of the benchmark dynamic factor model model.

- Shapiro, Sudhof, & Wilson (2020) derive a daily and monthly time-series sentiment from economic and financial newspaper articles from January 1980 to April 2015 with dictionary methods. The authors demonstrate that news sentiment is predictive of consumer sentiment measured using surveys.

- Bybee, Kelly, Manela, & Xiu (2020) use topic models to estimate a daily time-series news attention estimates to each theme from full text content of Wall Street Journal articles from January 1984 to June 2017. The authors show that the topic-based estimates accurately track a broad range of of economic variables such as aggregate output (industrial production) and employment (non-farm payrolls). The authors also find that the estimate have incremental forecasting power above and beyond standard numerical predictors

--

- The information encoded in text has been recently used in empirical economics research as a complement to the more structured macroeconomic and financial data traditionally used
  - Gentzkow, Kelly, & Taddy (2019), Kelly, Manela, & Moreira (2019), Shapiro, Sudhof, & Wilson (2020), Bybee, Kelly, Manela, & Xiu (2020) 

--

- Text selected from news articles arrives daily and is not revised, making textual data an ideal candidate to build more accurate nowcasting models about aggregate economic activity in real time

--

- In this paper I propose a text-based approach to create a high-frequency News-Based Sentiment Indicator (NBSI) regarding aggregate economic conditions, and evaluate the predictive ability of the NBSI
  - use NBSI to track a wide range of economic activity measures
  - estimate the contribution of NBSI to identify U.S. recessions in real time by incorporating NBSI in models developed in the previous chapter



---
# A New High Frequency, News Based, Indicator of Macroeconomic Activity
## Methodology

**Step #1: Data** 

From Factiva Database, I collect a large sample of leading paragraphs of articles published at daily frequency in the Wall Street Journal from April 2, 1991 to April 30, 2020 that have the following subjects: 

- News about commodity, debt, bond, equity, money and currency markets

- Analysts' comments or recommendations about corporates and industries

- Economic performance or indicators, government finance, monetary policy, trade or external payments


---
# A New High Frequency, News Based, Indicator of Macroeconomic Activity
## Methodology

**Step #1: Data** 

The leading paragraph is represented at each point in time. An example of this sample:

```{r ch4-table-example, echo=FALSE, message=FALSE, warnings=FALSE, results='asis'}
library(dplyr)
library(kableExtra)

dt <- data.frame(matrix(ncol = 2, nrow = 3))
colnames(dt)<-c("Date", "Leading Paragraph")

dt[,1] <- c("03-28-2006", "03-29-2006", "03-29-2006")

dt[1,2] <- c("Jon Corzine, New Jersey's new Governor, isn't the first politician not to follow through on a campaign promise. But rarely is such dishonesty later presented as a virtue. The question for voters to contemplate is whether this is also an indication of what to expect if Democrats gain control of Congress in November.Mr. Corzine won the Trenton statehouse last year by running as a tax cutter who'd raise property tax rebates by 40% over four years. \"I'm not considering raising taxes. It's not on my agenda. We have a very high-rate tax structure. I'm not considering it,\" the then-U.S. Senator had vowed in October.")
dt[2,2] <- c("A growing number of homeowners, riding the crest of the real-estate boom, are getting hit by an unpleasant surprise when they sell: a hefty tax bill.This development stems from a 1997 law that Treasury Department officials said at the time would eliminate capital-gains taxes for nearly everyone selling their primary residence. Under that law, most married couples who file jointly can exclude as much as $500,000 of their gain. For most singles, the limit is $250,000.")
dt[3,2] <- c("The airline most often viewed as the strongest, healthiest and best-run of the pack may be one of the weaker bets for investors hoping to profit from a budding turnaround in the industry.A strengthening market has sent some beleaguered airline stocks soaring in recent months, but shares in industry stalwart Southwest Airlines have been more sluggish. In the past year, the stock of American Airlines parent AMR Corp. has risen 168% on the New York Stock Exchange. Rival hub-and-spoke carrier Continental Airlines saw its stock price jump 142% on the Big Board during the 12-month period. But the same tide of good news has lifted Southwest's stock just 25% on the NYSE, though that gain still handily outpaced the Dow Jones Industrial Average, which was up 7% over the same period.")

kable(dt,  booktabs = T) %>%
  kable_styling(full_width = F, font_size = 12, position = "center") %>%
  column_spec(1, bold = F, border_right = F) %>%
  column_spec(2, width = "50em",border_right = F)
```


---
# A New High Frequency, News Based, Indicator of Macroeconomic Activity
## Methodology

**Step #2: Dictionary methods**

The raw text is extracted as a manageable high-dimensional numerical array using process criteria in the following order:
- Exclude leading paragraphs with less than 50 characters
- Tokenize the text into individual words and transform it to a tidy data structure
- Strip stopwords such as ‘a’, ‘the’, ‘to’, ‘for’ out of token lists
- Replace words with their root such that "economic", "economics", and "economically" are all replaced by the stem "economic"
- Assign "positive" or "negative" sentiment to words based on a general-purpose "Bing" lexicon which categorizes words in a binary fashion
- Reverse sentiment of words preceded by negation words “no”, “not”, “never”, “without”
- Measure sentiment scores for each leading paragraph with $\frac{n_{pos}-n_{neg}}{n_{words}}$
- Average sentiment scores of the same day to obtain a daily sentiment index
- Average daily sentiment to obtain a weekly and monthly sentiment index
  
---
# A New High Frequency, News Based, Indicator of Macroeconomic Activity
## Preliminary Results - weekly NBSI 

The index drops sharply before the start of the two recessions in the sample period, suggesting that the index might be a leading indicator with respect to recessions and might be used to nowcast or even forecast recessions

```{r , echo=FALSE, fig.width=9, out.width = "90%", fig.show='hold',fig.align='center'}
knitr::include_graphics(c("Figs/Ch4/NBSI_91Apr_20Apr.png"))
```



---
# A New High Frequency, News Based, Indicator of Macroeconomic Activity
## Preliminary Results - weekly NBSI

The standardized weekly NBSI for January through April in 2020 presents how NBSI picked up the bad economic outcomes in February 2020, prior to the real problems starting in the United States in March

```{r , echo=FALSE, fig.width=9, out.width = "90%", fig.show='hold',fig.align='center'}
knitr::include_graphics(c("Figs/Ch4/NBSI_20Jan_20Apr.png"))
```



---
# A New High Frequency, News Based, Indicator of Macroeconomic Activity
## Preliminary Results - weekly NBSI with weekly Initial Claims (ICSA)

???

- **correlation between the weekly NBSI and the weekly initial claims to unemployment insurance (ICSA)**

- **How NBSI tracks ICSA contemporaneously is shown in the left panel and how 4-week moving average of NBSI tracks 4-week moving average of ICSA is shown in the right panel**

- **P-values are in parenthesis**

- **There is sufficient evidence to conclude that there is a significant negative linear relationship between the weekly NBSI and contemporaneous ICSA at a significance level of 0.01**

--

```{r , echo=FALSE, fig.width=9, out.width = "90%", fig.show='hold',fig.align='center'}
knitr::include_graphics(c("Figs/Ch4/two_weekly.png"))
```

.pull-left[
```{r ch4-table-corr2, echo=FALSE, message=FALSE, warnings=FALSE, results='asis'}
options(knitr.kable.NA = '')

corr_table2 <- data.frame(matrix(ncol = 4, nrow = 2))
colnames(corr_table2) <- c("NBSI", "Moving Average of NBSI", "Lagged NBSI", "Moving Average of Lagged NBSI")
rownames(corr_table2) <- c("ICSA", "Moving Average of ICSA")

corr_table2[1,1] <- c("-0.099(<.001)")
corr_table2[2,2] <- c("-0.097(.060)")
corr_table2[1,3] <- c("-0.101(<.001)")
corr_table2[2,4] <- c("-0.099(.055)")

kable(corr_table2, booktabs = T) %>%
  kable_styling(full_width = F, font_size = 9, position = "center") %>%
  column_spec(5, width = "7em") %>%
  column_spec(2, width = "7em") %>%
  column_spec(3, width = "7em") %>%
  column_spec(4, width = "7em") %>%
  column_spec(4, width = "5em") 
```
]

.pull-right[
- All Pearson correlations have correct signs and fairly large magnitudes
]

---
# A New High Frequency, News Based, Indicator of Macroeconomic Activity 
## Preliminary Results - monthly NBSI with monthly macroeconomic variables 

???

- **I analyze the ability of the monthly NBSI to track fluctuations in the economic activity**

- **Monthly macroeconomic variables I use include unemployment rate, total nonfarm payroll, industrial production, real manufacturing and industries sales, and University of Michigan consumer sentiment**

- **Figure shows the movement between the monthly NBSI and monthly macroeconomic variables**

- **There is sufficient evidence to conclude that there is a significant negative linear relationship between the monthly NBSI and unemployment rate at a significance level of 0.05. There is also a significant negative linear relationship between the monthly NBSI and the change of unemployment rate at a significance level of 0.01**

- **There are positive linear relationships between the monthly NBSI and all other macroeconomic variables at a significance level of 0.01**

--

```{r , echo=FALSE, fig.width=8, out.width = "80%", fig.show='hold',fig.align='center'}
knitr::include_graphics(c("Figs/Ch4/all_monthly.png"))
```

.pull-left[
```{r ch4-table-corr1, echo=FALSE, message=FALSE, warnings=FALSE, results='asis'}
corr_table <- data.frame(matrix(ncol = 2, nrow = 6))

colnames(corr_table) <- c("Pearson Correlation", "P-value")
rownames(corr_table) <- c("Unemployment Rate", "Change in Unemployment Rate","Payroll Employment Growth", "Industrial Production Growth", "Real Manufacturing and Trade Sales Growth", "University of Michigan Consumer Sentiment")

corr_table[1,1] <- c(-0.1347044)
corr_table[2,1] <- c(-0.2390528)
corr_table[3,1] <- c(0.4907129)
corr_table[4,1] <- c(0.3747335)
corr_table[5,1] <- c(0.2464932)
corr_table[6,1] <- c(0.4682164)

corr_table[1,2] <- c(.0118927)
corr_table[2,2] <- c(.0000065)
corr_table[3,2] <- c(.0000065)
corr_table[4,2] <- c(.0000065)
corr_table[5,2] <- c(.0000065)
corr_table[6,2] <- c(.0000065)

kable(corr_table, booktabs = T) %>%
  kable_styling(full_width = F, font_size = 9, position = "center") 
```
]

.pull-right[
- All Pearson correlations have correct signs and fairly large magnitudes
]

---
# A New High Frequency, News Based, Indicator of Macroeconomic Activity 
## Future Directions

???

- Words such as “federal funds rate”, “increase”, and “decrease” are not categorized

- “the federal funds rate increase”: the dictionary method fails to contribute to the negative score

- words such as “unemployment” is categorized as “negative”.

- “the unemployment rate decreases”: the dictionary method wrongly contribute to the negative score

--

**Accounting for the context of text**:
- I plan to manually rate the sentiment of a fraction of news articles, and then use Bidirectional Encoder Representations from Transformers (BERT), a more recently developed learning model developed at Google, to model context and sequential information in text

--

**Applications using NBSI:** 
- Exploring nowcasting power of NBSI for monthly macroeconomic variables as the month evolves 
- Exploring nowcasting power for recessions and expanions, within the framework proposed in previous paper


---
exclude: true

```{r, generate pdfs, include = F, eval = F}
# method 1:
pagedown::chrome_print("Prospectus_2020May29.html", output = "Prospectus_2020May29.pdf")
pagedown::chrome_print("Prospectus_2020May29.html", output = "Prospectus_2020May29.pdf")
# can set longer time to allow for the longer conversion of the pdf document: say, 60 sec rather than 30 sec  
# need to set the working directory to be the folder that contains .html 

# method 2:
library(webshot)
file_name <- paste0("file://", normalizePath("Prospectus_2020May29.html"))
webshot(file_name, "Prospectus_2020May29.pdf")

# to maintain the incremental bullets in the pdf: use either method 1 or method 2, but need to comment out the css block on the top
```

